<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Luminare Sample App - Profile</title>

</head>
<body>
  <div id="content"></div>
  <script>
    const username = '<%- authenticatedUserData.username %>';
    const firstname = '<%- authenticatedUserData.firstname %>';
    const lastname = '<%- authenticatedUserData.lastname %>';
    const idToken = '<%- authenticatedUserData.idToken %>';
    const accessToken = '<%- authenticatedUserData.accessToken %>';
    console.log(accessToken);
  // HTML page to render.
    var render = async function(){
          const par1 = document.createElement('p');
          par1.innerHTML = `Hello <b>${username}</b>`;
          document.getElementById('content').appendChild(par1);

          const par2 = document.createElement('p');
          par2.innerHTML = `<b>First Name:</b><br> ${firstname}`;
          document.getElementById('content').appendChild(par2);

          const par3 = document.createElement('p');
          par3.innerHTML = `<b>Last Name:</b><br> ${lastname}`;
          document.getElementById('content').appendChild(par3);

          const par4 = document.createElement('p');
          par4.innerHTML = `<a target=_blank href="http://localhost:3001/ssosignin?accessToken=${accessToken}">Open Web SSO App</a><br>`;
          document.getElementById('content').appendChild(par4);

          const logoutFragment = document.createElement('div');
          logoutFragment.innerHTML = `<button id="submit-login-form" onclick="logout();">
                                        LOGOUT
                                      </button>`;
          document.getElementById('content').appendChild(logoutFragment);
    }

    // Logout. Remove token from browser local storage.
    var logout = async function(){
      window.location.replace("/"); 
    }

    render()
  </script>
</body>
</html>